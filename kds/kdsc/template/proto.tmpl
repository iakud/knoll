{{- /* BEGIN DEFINE */ -}}
{{- /* ENUM */ -}}
{{- define "Enum"}}
enum {{.Name}} {
{{- range .EnumFields}}
	{{.Name}} = {{.Value}};
{{- end}}
}
{{- end}}
{{- /* MESSAGE */ -}}
{{- define "Message"}}
message {{.Name}} {
{{- range .Fields}}
{{- if .Repeated}}
	repeated {{protoType .Type}} {{.Name}} = {{.Number}};
{{- else if .Map}}
	map<{{protoType .KeyType}}, {{protoType .Type}}> {{.Name}} = {{.Number}};
{{- else}}
	{{protoType .Type}} {{.Name}} = {{.Number}};
{{- end}}
{{- end}}
}
{{- end}}
{{- /* ENTITY */ -}}
{{- define "Entity"}}
{{- template "Message" .}}
{{- end}}
{{- /* COMPONENT */ -}}
{{- define "Component"}}
{{- template "Message" .}}
{{- end}}
{{- /* END DEFINE */ -}}
{{- /* BEGIN PROTOBUF */ -}}
// Code generated by kds. DO NOT EDIT.
// source: {{.SourceFile}}

edition = "2023";

package {{.Package}};

{{- if len .Imports}}
{{/* EMPTY LINE */}}
{{- end}}
{{- range .Imports}}
import "{{.}}.proto";
{{- end}}

{{- if len .ProtoImports}}
{{/* EMPTY LINE */}}
{{- range .ProtoImports}}
import "{{.}}";
{{- end}}
{{- end}}

option go_package="{{.ProtoGoPackage}}";

{{- range .Defs}}
{{- if eq .Kind "enum"}}
{{/* EMPTY LINE */}}
{{- template "Enum" .}}
{{- else if eq .Kind "entity"}}
{{/* EMPTY LINE */}}
{{- template "Entity" .}}
{{- else if eq .Kind "component"}}
{{/* EMPTY LINE */}}
{{- template "Component" .}}
{{- end}}
{{- end}}
{{- /* END PROTOBUF */ -}}